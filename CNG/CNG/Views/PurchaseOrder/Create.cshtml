@model CNG.Models.PurchaseOrder

@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script src="~/Scripts/jquery-1.10.2.js"></script>
<script src="~/Scripts/moment.js"></script>
<script src="~/Scripts/app/PurchaseOrder.js"></script>

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <h4>New Purchase Order</h4>
        <hr />
        
        <div>
            PO Number<label id="lblPoNumber">@ViewBag.PoNumber</label>
        </div>
        <br/>
        
        <div>
            Vendor @Html.DropDownList("VendorId", (IEnumerable<SelectListItem>)ViewBag.Vendors, "")

            <br />
            Name <label id="lblVendorName"></label> <br />
            Address <label id="lblVendorAddress"></label> <br />
            Contact Person <label id="lblVendorContactPerson"></label> <br />
            Contact No <label id="lblVendorContactNo"></label> <br />
        </div>
        
        <br/>

        <div>
            Ship To @Html.DropDownList("ShipTo", (IEnumerable<SelectListItem>)ViewBag.Companies, "")
            <br/>
            Company Name <label id="lblCompanyname"></label>  <br/>
            Address <label id="lblShippingAddress"></label> <br />
            Contact Person <label id="lblShippingContactPerson"></label> <br />
            Contact No <label id="lblShippingContactNo"></label> <br />
        </div>

        <br/>

        <div>
            Terms <label id="lblTerms"></label> <br/>

            Due Date <label id="lblDueDate"></label>
        </div>

        <br />

        <div>
            Add Items<br />

            Search item: @Html.DropDownList("Items", (IEnumerable<SelectListItem>)ViewBag.Items, "")
            <input type="button" id="btnAddItem" value="Ok" />

            <br/>

            <table id="tblItems">
                <thead>
                    <tr>
                        <th>Code</th>
                        <th>Description</th>
                        <th>Brand</th>
                        <th>Type</th>
                        <th>Unit Cost</th>
                        <th>Quantity</th>
                        <th>Remarks</th>
                        <th>Action</th>
                    </tr>
                </thead>

                <tbody>
                    @foreach (var poItem in Model.PurchaseOrderItems)
                    {
                        <tr data-item-id="@poItem.ItemId">
                            <td>
                                @poItem.Item.Code
                            </td>
                            <td>
                                @poItem.Item.Description
                            </td>
                            <td>
                                @poItem.Item.Brand
                            </td>
                            <td>
                                @poItem.Item.Type.Description
                            </td>
                            <td>
                                @poItem.UnitCost
                            </td>
                            <td>
                                <input type='text' class='txtQuantity' value="@poItem.Quantity" />
                            </td>
                            <td>
                                <textarea id='txtRemarks'> @poItem.Remarks </textarea>
                            </td>
                            <td>
                                <input type='button' class='btnRemoveItem' value='Remove'>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
        
        <br/>
        <div>
            Prepared By: <label id="lblPreparedBy"></label>
            <br/>
            Approved By: <label id="lblApprovedBy"></label>
        </div>

        <br/>
        
        <input id="btnSubmit" type="submit" value="Submit" />

        <br />
        @Html.ActionLink("Back to List", "Index")
    </div>
}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}
